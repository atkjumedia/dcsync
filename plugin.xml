<?xml version="1.0" encoding="UTF-8"?>
    <plugin xmlns="http://apache.org/cordova/ns/plugins/1.0" xmlns:android="http://schemas.android.com/apk/res/android" 
       id="cordova-plugin-dcsync" version="0.3.9">
        <name>DCSync</name>
        <description>Cordova Datacollector Sync Plugin</description>
        <license>Apache 2.0</license>
        <keywords>cordova,dcsync, sync</keywords>
		
		    <!-- Third party libraries -->
  
		<dependency id="cordova-plugin-file" version="^3.0.1" />
		
		<js-module name="Q" src="www/lib/q.min.js">
			<runs/>
		</js-module>
    
		<!-- Plugin source code: Core -->
		<js-module name="DCSync" src="www/DCSync.js">
			<merges target="cordova.plugins"/>
		</js-module>
		
        <platform name="ios">
				<config-file target="config.xml" parent="/*">
					<feature name="DCSync">
						<param name="ios-package" value="DCSync"/>
					</feature>
				</config-file>
				<header-file src="src/ios/DCSync.h" />
				<source-file src="src/ios/DCSync.m" />

				<header-file src="src/ios/FilePool.h" />
				<source-file src="src/ios/FilePool.m" />

				<header-file src="src/ios/DatacollectorAPI.h" />
				<source-file src="src/ios/DatacollectorAPI.m" />

		        <header-file src="src/ios/DCSyncConst.h" />

		        <header-file src="src/ios/ZipArchive/ZipArchive.h" />
		        <source-file src="src/ios/ZipArchive/ZipArchive.mm" compiler-flags="-fno-objc-arc"/>

		        <header-file src="src/ios/SQLiteManager.h" />
		        <source-file src="src/ios/SQLiteManager.m" compiler-flags="-fno-objc-arc"/>
		        
		           <header-file src="src/ios/SQLiteObject.h" />
		        <source-file src="src/ios/SQLiteObject.m" compiler-flags="-fno-objc-arc"/>

		        <header-file src="src/ios/ZipArchive/minizip/crypt.h" />
		        <header-file src="src/ios/ZipArchive/minizip/ioapi.h" />
		        <header-file src="src/ios/ZipArchive/minizip/mztools.h" />
		        <header-file src="src/ios/ZipArchive/minizip/unzip.h" />
		        <header-file src="src/ios/ZipArchive/minizip/zip.h" />

		        <source-file src="src/ios/ZipArchive/minizip/ioapi.c" />
		        <source-file src="src/ios/ZipArchive/minizip/mztools.c" />
		        <source-file src="src/ios/ZipArchive/minizip/unzip.c" />
		        <source-file src="src/ios/ZipArchive/minizip/zip.c" />

		        <framework src="libz.1.2.5.tbd" />
		        <framework src="libsqlite3.tbd" />

		        <framework src="Security.framework" />
		        <framework src="SystemConfiguration.framework" />

			</platform>
		 <platform name="android">
			<config-file target="res/xml/config.xml" parent="/*">
				<feature name="DCSync" >
					<param name="android-package" value="at.kju.datacollector.DCSync"/>
				</feature>
			</config-file>
			<config-file target="AndroidManifest.xml" parent="/manifest">
				<uses-permission android:name="android.permission.INTERNET" />
				<uses-permission android:name="android.permission.GET_ACCOUNTS" />
				<uses-permission android:name="android.permission.USE_CREDENTIALS" />
				<uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
				<uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
				<uses-permission android:name="android.permission.READ_SYNC_STATS" />
				<uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
				<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
			</config-file>

			<config-file target="res/values/strings.xml" parent="/*">
				<string name="aam_account_type">at.kju.saloncarcollector</string>
			</config-file> 
			
			<config-file target="AndroidManifest.xml" parent="/manifest/application">
			
				<provider android:authorities="at.kju.saloncarcollector" android:exported="true" android:name="at.kju.datacollector.storage.DCContentProvider" />
				<service android:exported="true" android:name="at.kju.datacollector.authenticator.AuthenticationService">
					<intent-filter>
						<action android:name="android.accounts.AccountAuthenticator" />
					</intent-filter>
					<meta-data android:name="android.accounts.AccountAuthenticator" android:resource="@xml/authenticator" />
				</service>
				<service android:exported="false" android:name="at.kju.datacollector.syncadapter.SyncService">
					<intent-filter>
						<action android:name="android.content.SyncAdapter" />
					</intent-filter>
					<meta-data android:name="android.content.SyncAdapter" android:resource="@xml/syncadapter" />
				</service>
			</config-file>
		
			<resource-file src="res/xml/authenticator.xml" target="res/xml/authenticator.xml" />
			<resource-file src="res/xml/syncadapter.xml" target="res/xml/syncadapter.xml" />
			
			<source-file src="src/android/Constants.java" target-dir="src/at/kju/datacollector" />
			<source-file src="src/android/DCSync.java" target-dir="src/at/kju/datacollector" />
			<source-file src="src/android/authenticator/AuthenticationService.java" target-dir="src/at/kju/datacollector/authenticator" />
			<source-file src="src/android/authenticator/Authenticator.java" target-dir="src/at/kju/datacollector/authenticator" />
			<source-file src="src/android/authenticator/JsonHelper.java" target-dir="src/at/kju/datacollector/authenticator" />
			<source-file src="src/android/client/DCDocument.java" target-dir="src/at/kju/datacollector/client" />
			<source-file src="src/android/client/MultipartUtility.java" target-dir="src/at/kju/datacollector/client" />
			<source-file src="src/android/client/NetworkUtilities.java" target-dir="src/at/kju/datacollector/client" />
			<source-file src="src/android/client/SyncSettings.java" target-dir="src/at/kju/datacollector/client" />
			<source-file src="src/android/client/Progress.java" target-dir="src/at/kju/datacollector/client" />
			<source-file src="src/android/storage/DCContentProvider.java" target-dir="src/at/kju/datacollector/storage" />
			<source-file src="src/android/storage/DCDataHelper.java" target-dir="src/at/kju/datacollector/storage" />
			<source-file src="src/android/storage/DCRepository.java" target-dir="src/at/kju/datacollector/storage" />
			<source-file src="src/android/storage/LocalStorageSyncManager.java" target-dir="src/at/kju/datacollector/storage" />
			<source-file src="src/android/syncadapter/SyncAdapter.java" target-dir="src/at/kju/datacollector/syncadapter" />
			<source-file src="src/android/syncadapter/SyncService.java" target-dir="src/at/kju/datacollector/syncadapter" />
			<!--<resource-file src="FooPluginStrings.xml" target="res/values/FooPluginStrings.xml" />-->
        </platform>
    </plugin>
